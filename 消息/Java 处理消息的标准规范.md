---
up:
  - "[[SpringBoot 課程描述]]"
---
目前企业级开发中广泛使用的消息处理技术共三大类，具体如下：

- JMS
- AMQP
- MQTT

​为什么是三大类，而不是三个技术呢？因为这些都是规范，就想 JDBC 技术，是个规范，开发针对规范开发，运行还要靠实现类，例如 MySQL 提供了 JDBC 的实现，最终运行靠的还是实现。并且这三类规范都是针对异步消息进行处理的，也符合消息的设计本质，处理异步的业务。对以上三种消息规范做一下普及

---

# JMS

​JMS（Java Message Service）,这是一个规范，作用等同于 JDBC 规范，提供了与消息服务相关的API接口。

## **JMS消息模型**

​JMS 规范中规范了消息有两种模型。分别是**点对点模型**和**发布订阅模型**。

​**点对点模型**：peer-2-peer，生产者会将消息发送到一个保存消息的容器中，通常使用队列模型，使用队列保存消息。一个队列的消息只能被一个消费者消费，或未被及时消费导致超时。这种模型下，生产者和消费者是一对一绑定的。

​**发布订阅模型**：publish-subscribe，生产者将消息发送到一个保存消息的容器中，也是使用队列模型来保存。但是消息可以被多个消费者消费，生产者和消费者完全独立，相互不需要感知对方的存在。

​以上这种分类是从消息的生产和消费过程来进行区分，针对消息所包含的信息不同，还可以进行不同类别的划分。

## **JMS消息种类**

​根据消息中包含的数据种类划分，可以将消息划分成6种消息。

- TextMessage
- MapMessage
- BytesMessage
- StreamMessage
- ObjectMessage
- Message （只有消息头和属性）

​JMS 主张不同种类的消息，消费方式不同，可以根据使用需要选择不同种类的消息。但是这一点也成为其诟病之处，后面再说。整体上来说，JMS 就是典型的保守派，什么都按照 J2EE 的规范来，做一套规范，定义若干个标准，每个标准下又提供一大批 API。

目前对 JMS 规范实现的消息中间件技术还是挺多的，毕竟是皇家御用，肯定有人舔，例如ActiveMQ、Redis、HornetMQ。但是也有一些不太规范的实现，参考 JMS 的标准设计，但是又不完全满足其规范，例如：RabbitMQ、RocketMQ。

---
# AMQP

​JMS 的问世为消息中间件提供了很强大的规范性支撑，但是使用的过程中就开始被人诟病，比如JMS 设置的极其复杂的多种类消息处理机制。本来分门别类处理挺好的，为什么会被诟病呢？原因就在于 JMS 的设计是 J2EE 规范，站在 Java 开发的角度思考问题。但是现实往往是复杂度很高的。比如我有一个 .NET 开发的系统 A，有一个 Java 开发的系统 B，现在要从 A 系统给 B 系统发业务消息，结果两边数据格式不统一，没法操作。

JMS 不是可以统一数据格式吗？提供了 6 种数据种类，总有一款适合你啊。NO，一个都不能用。因为 A 系统的底层语言不是 Java 语言开发的，根本不支持那些对象。这就意味着如果想使用现有的业务系统A继续开发已经不可能了，必须推翻重新做使用Java语言开发的A系统。

​这时候有人就提出说，你搞那么复杂，整那么多种类干什么？找一种大家都支持的消息数据类型不就解决这个跨平台的问题了吗？大家一想，对啊，于是 AMQP 孕育而生。

​单从上面的说明中其实可以明确感知到，AMQP 的出现解决的是消息传递时使用的消息种类的问题，化繁为简，但是其并没有完全推翻 JMS 的操作 API，所以说 AMQP 仅仅是一种协议，规范了数据传输的格式而已。

​AMQP（advanced message queuing protocol）：一种协议（高级消息队列协议，也是消息代理规范），规范了网络交换的数据格式，兼容JMS操作。

**优点：** 具有跨平台性，服务器供应商，生产者，消费者可以使用不同的语言来实现

## **AMQP 消息种类**

​AMQP 消息种类：`byte[]`

AMQP 在JMS的消息模型基础上又进行了进一步的扩展，除了点对点和发布订阅的模型，开发了几种全新的消息模型，适应各种各样的消息发送。

## **AMQP消息模型**

- direct exchange
- fanout exchange
- topic exchange
- headers exchange
- system exchange

> 目前实现了AMQP协议的消息中间件技术也很多，而且都是较为流行的技术，例如：RabbitMQ、StormMQ、RocketMQ

---

# MQTT

​MQTT（Message Queueing Telemetry Transport）消息队列遥测传输，专为小设备设计，是物联网（IOT）生态系统中主要成分之一。由于与 JavaEE 企业级开发没有交集，此处不作过多的说明。

---

除了上述3种，J2EE 企业级应用中广泛使用的三种异步消息传递技术，还有一种技术也不能忽略，Kafka。

Kafka，一种高吞吐量的分布式发布订阅消息系统，提供实时消息功能。Kafka 技术并不是作为消息中间件为主要功能的产品，但是其拥有发布订阅的工作模式，也可以充当消息中间件来使用，而且目前企业级开发中其身影也不少见。

​本节内容讲围绕着上述内容中的几种实现方案讲解 springboot 整合各种各样的消息中间件。由于各种消息中间件必须先安装再使用，下面的内容采用 Windows 系统安装，降低各位学习者的学习难度，基本套路和之前学习 NoSQL 解决方案一样，先安装再整合。