---
up:
  - "[[SpringBoot 課程描述]]"
---
创建实体类

```java
@Data
public class Cat {
    private String name;
    private Integer age;
}
```

```java
@Data
public class Mouse {
    private String name;
    private Integer age;
}
```

配置文件application.yml使用固定格式为属性注入数据

```yml
cartoon:
  cat:
    name: "图多盖洛"
    age: 5
  mouse:
    name: "泰菲"
    age: 6
```

业务类定义业务功能 bean，在引导类通常使用 @Import 导入，解耦强制加载 bean

使用 @EnableConfigurationProperties 注解设定使用属性类时加载 bean

```java
@Data
//当加载CartoonCatAndMouse类时将CartoonProperties类加载成bean，不用不加载，解耦合
@EnableConfigurationProperties(CartoonProperties.class)
public class CartoonCatAndMouse {
    private Cat cat;
    private Mouse mouse;
 
    private CartoonProperties cartoonProperties;
 
    public CartoonCatAndMouse(CartoonProperties cartoonProperties){
        this.cartoonProperties = cartoonProperties;
        cat = new Cat();
        cat.setName(cartoonProperties.getCat()!=null && StringUtils.hasText(cartoonProperties.getCat().getName()) ? cartoonProperties.getCat().getName() : "tom");
        cat.setAge(cartoonProperties.getCat()!=null && cartoonProperties.getCat().getAge()!=null ? cartoonProperties.getCat().getAge() : 3);
        mouse = new Mouse();
        mouse.setName(cartoonProperties.getMouse()!=null && StringUtils.hasText(cartoonProperties.getMouse().getName()) ? cartoonProperties.getMouse().getName() : "jerry");
        mouse.setAge(cartoonProperties.getMouse()!=null && cartoonProperties.getMouse().getAge()!=null ? cartoonProperties.getMouse().getAge() : 4);
 
    }
 
    public void play(){
        System.out.println(cat.getAge()+"岁的"+cat.getName()+"和"+ mouse.getAge()+"岁的"+mouse.getName()+"打起来了");
    }
}
```

将业务功能bean运行需要的资源抽取长独立的属性类，设置读取配置文件的信息

```java
@Data
//类与配置文件绑定
@ConfigurationProperties(prefix = "cartoon")
public class CartoonProperties {
    private Cat cat;
    private Mouse mouse;
}
```

测试：

```java
@SpringBootApplication
//当运行时将CartoonCatAndMouse类加载成bean，不允许不加载
@Import(CartoonCatAndMouse.class)
public class TestSpringBootApplication {

    public static void main(String[] args) {
        ConfigurableApplicationContext ctx = SpringApplication.run(TestSpringBootApplication.class, args);
        CartoonCatAndMouse bean = ctx.getBean(CartoonCatAndMouse.class);
        bean.play();
    }
}
```