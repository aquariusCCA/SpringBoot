---
up:
  - "[[SpringBoot 課程描述]]"
  - "[[邮件]]"
參考文章: https://ithelp.ithome.com.tw/articles/10329567
---
**步骤①**：导入springboot整合javamail的starter

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-mail</artifactId>
</dependency>
```

**步骤②**：配置邮箱的登录信息

```yaml
spring:  
  mail:  
    host: smtp.gmail.com  
    port: 587  
    username: aquarius.c.c.a@gmail.com        # 改成你的寄件帳號  
    password: uool kcne ezmm xezj     # App Password（不是一般登入密碼）  
    protocol: smtp  
    default-encoding: UTF-8  
    properties:  
      mail:  
        smtp:  
          auth: true  
          starttls:  
            enable: true
```

​java 程序仅用于发送邮件，邮件的功能还是邮件供应商提供的，所以这里是用别人的邮件服务，要配置对应信息。

​host配置的是提供邮件服务的主机协议，当前程序仅用于发送邮件，因此配置的是smtp的协议。

​password并不是邮箱账号的登录密码，是邮件供应商提供的一个加密后的密码，也是为了保障系统安全性。不然外部人员通过地址访问下载了配置文件，直接获取到了邮件密码就会有极大的安全隐患。有关该密码的获取每个邮件供应商提供的方式都不一样，此处略过。可以到邮件供应商的设置页面找POP3或IMAP这些关键词找到对应的获取位置。下例仅供参考：

![[邮件/附件/image-20220228111251036.png]]

**步骤③**：使用JavaMailSender接口发送邮件

```java
@Service
public class MailServiceImpl implements MailService {
    @Autowired
    private JavaMailSender javaMailSender;

    /**
     * 發送最簡單的純文字郵件
     */
    public void sendSimpleText(String from, String to, String subject, String content) {
        SimpleMailMessage msg = new SimpleMailMessage();
        // 多數供應商要求 from 必須等於/授權於 username
        msg.setFrom(from);
        msg.setTo(to);
        msg.setSubject(subject);
        msg.setText(content);
        javaMailSender.send(msg);
    }
}
```

​将发送邮件的必要信息（发件人、收件人、标题、正文）封装到SimpleMailMessage对象中，可以根据规则设置发送人昵称等。

```java
@SpringBootTest
public class MailTest {
    @Autowired
    private MailService mailService;

    @Test
    void test(){
        mailService.sendSimpleText(
                "aquarius.c.c.a@gmail.com",         // from: 建議與 spring.mail.username 相同
                "aquarius.c.c.a@gmail.com",         // 收件者
                "測試郵件（純文字）",
                "這是一封由 Spring Boot 發出的測試郵件。"
        );
        System.out.println("Mail sent.");
    }
}
```