---
up:
  - "[[SpringBoot 課程描述]]"
  - "[[邮件]]"
---
> 发送简单邮件仅需要提供对应的4个基本信息就可以了，如果想发送复杂的邮件，需要更换邮件对象。使用MimeMessage可以发送特殊的邮件。

**发送网页正文邮件**

```JAVA
public class MailServiceImpl implements MailService {
    @Autowired
    private JavaMailSender javaMailSender;

    @Override
    public void sendHTMLMail(String from, String to, String subject, String content) {
                try {
            MimeMessage message = javaMailSender.createMimeMessage();
            MimeMessageHelper helper = new MimeMessageHelper(message);
            helper.setFrom(from);
            helper.setTo(to);
            helper.setSubject(subject);
            helper.setText(content, true);		//此处设置正文支持html解析

            javaMailSender.send(message);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

```java
@Test
public void testHTMLMail() {
	String htmlContent = """
			<h1>這是一封由 Spring Boot 發出的測試郵件</h1>
			<p style="color:blue">這是一封 <b>HTML</b> 郵件。</p>
			<a href="https://www.google.com">Google</a>
			""";

	mailService.sendHTMLMail(
			"aquarius.c.c.a@gmail.com",         // from: 建議與 spring.mail.username 相同
			"aquarius.c.c.a@gmail.com",         // 收件者
			"測試郵件（純文字）",
			htmlContent
	);

	System.out.println("Mail sent.");
}
```

**发送带有附件的邮件**

```JAVA
@Service
public class MailServiceImpl implements MailService {
    @Autowired
    private JavaMailSender javaMailSender;

    @Override
    public void sendAttachmentMail(String from, String to, String subject, String content) {
        try {
            MimeMessage message = javaMailSender.createMimeMessage();
            MimeMessageHelper helper = new MimeMessageHelper(message,true);		//此处设置支持附件
            helper.setFrom(from);
            helper.setTo(to);
            helper.setSubject(subject);
            helper.setText(content);

            //添加附件
            // 從 classpath 讀取（可執行 JAR 也適用）
            ClassPathResource res = new ClassPathResource("test.jpg");
            helper.addAttachment("最靠谱的培训结构.png", res);

            javaMailSender.send(message);
        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
}
```

```java
@Test
public void testAttachmentMail() {
	String content = "這是一封帶有附件的郵件。請查收附件！";

	mailService.sendAttachmentMail(
			"aquarius.c.c.a@gmail.com",         // from: 建議與 spring.mail.username 相同
			"aquarius.c.c.a@gmail.com",         // 收件者
			"測試郵件（純文字）",
			"這是一封由 Spring Boot 發出的測試郵件。"
	);

	System.out.println("Mail sent.");
}
```