---
up:
  - "[[入门案例解析]]"
---
SpringBoot 提供了配置文件和临时属性的方式来对程序进行配置。前面一直说的是临时属性，这一节要说说配置文件了。其实这个配置文件我们一直在使用，只不过我们用的是 SpringBoot 提供的4级配置文件中的其中一个级别。4个级别分别是：

- 类路径下配置文件（一直使用的是这个，也就是 resources 目录中的 application.yml 文件）
- 类路径下 config 目录下配置文件
- 程序包所在目录中配置文件
- 程序包所在目录中 config 目录下配置文件

​好复杂，一个一个说。其实上述4种文件是提供给你了4种配置文件书写的位置，功能都是一样的，都是做配置的。那大家关心的就是差别了，没错，就是因为位置不同，产生了差异。总体上来说，4种配置文件如果都存在的话，有一个优先级的问题，说白了就是加入4个文件我都有，里面都有一样的配置，谁生效的问题。上面4个文件的加载优先顺序为

```text  
. project-sample  
├── config  
│   ├── application.yml （4）  【最高】
│   └── src/main/resources  
|   │   ├── application.yml （1） 【最低】 
|   │   └── config  
|   |   │   ├── application.yml （2）  
├── application.yml （3）  
  
注：src/main/resources下的配置文件在项目编译时，会放在target/classes下
```

> **启动时加载配置文件顺序：`1 -> 2 -> 3 -> 4`，优先级 `4 > 3 > 2 > 1`**

​那为什么设计这种多种呢？说一个最典型的应用吧。

- 场景A：你作为一个开发者，你做程序的时候为了方便自己写代码，配置的数据库肯定是连接你自己本机的，咱们使用4这个级别，也就是之前一直用的 application.yml。
- 场景B：现在项目开发到了一个阶段，要联调测试了，连接的数据库是测试服务器的数据库，肯定要换一组配置吧。你可以选择把你之前的文件中的内容都改了，目前还不麻烦。
- 场景C：测试完了，一切OK。你继续写你的代码，你发现你原来写的配置文件被改成测试服务器的内容了，你要再改回来。现在明白了不？场景B中把你的内容都改掉了，你现在要重新改回来，以后呢？改来改去吗？

​解决方案很简单，用上面的3这个级别的配置文件就可以快速解决这个问题，再写一个配置就行了。两个配置文件共存，因为config目录中的配置加载优先级比你的高，所以配置项如果和级别4里面的内容相同就覆盖了，这样是不是很简单？

​级别1和2什么时候使用呢？程序打包以后就要用这个级别了，管你程序里面配置写的是什么？我的级别高，可以轻松覆盖你，就不用考虑这些配置冲突的问题了。

> [!NOTE] **总结**
> 
> 1. 配置文件分为4种
> 	- 项目类路径配置文件：服务于开发人员本机开发与测试
> 	- 项目类路径config目录中配置文件：服务于项目经理整体调控
> 	- 工程路径配置文件：服务于运维人员配置涉密线上环境
> 	- 工程路径config目录中配置文件：服务于运维经理整体调控
> 2. 多层级配置文件间的属性采用叠加并覆盖的形式作用于程序
