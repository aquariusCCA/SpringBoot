---
up:
  - "[[SpringBoot 課程描述]]"
---
在前面的配置中，我们书写了如下配置值，其中第三项超时时间timeout描述了服务器操作超时时间，当前值是-1表示永不超时。

```YML
servers:
  ip-address: 192.168.0.1 
  port: 2345
  timeout: -1
```

​但是每个人都这个值的理解会产生不同，比如线上服务器完成一次主从备份，配置超时时间240，这个240如果单位是秒就是超时时间4分钟，如果单位是分钟就是超时时间4小时。面对一次线上服务器的主从备份，设置4分钟，简直是开玩笑，别说拷贝过程，备份之前的压缩过程4分钟也搞不定，这个时候问题就来了，怎么解决这个误会？

​除了加强约定之外，springboot充分利用了JDK8中提供的全新的用来表示计量单位的新数据类型，从根本上解决这个问题。以下模型类中添加了两个JDK8中新增的类，分别是Duration和DataSize

```yml
# 方式一：不寫單位，使用類別上的預設單位（HOURS / MEGABYTES）  
servers:  
  server-time-out: 2      # 解析為 2 小時  
  data-size: 256          # 解析為 256 MB  
  
# 方式二：顯式標註單位（會覆蓋預設）  
# servers:  
#   server-time-out: 30s  # 30 秒  
#   data-size: 1GiB       # 1 GiB
```

```JAVA
@Component
@Data
@ConfigurationProperties(prefix = "servers")
public class ServerConfig {
    @DurationUnit(ChronoUnit.HOURS)
    private Duration serverTimeOut;
    
    @DataSizeUnit(DataUnit.MEGABYTES)
    private DataSize dataSize;
}
```

**Duration**：表示时间间隔，可以通过@DurationUnit注解描述时间单位，例如上例中描述的单位为小时（ChronoUnit.HOURS）

**DataSize**：表示存储空间，可以通过@DataSizeUnit注解描述存储空间单位，例如上例中描述的单位为MB（DataUnit.MEGABYTES）

​使用上述两个单位就可以有效避免因沟通不同步或文档不健全导致的信息不对称问题，从根本上解决了问题，避免产生误读。

Druation常用单位如下：

![[属性绑定/附件/image-20220222173911102.png]]

DataSize常用单位如下：

![[属性绑定/附件/image-20220222174130102.png]]